package org.jsp.DepartmentEmployee.dao;

import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

import org.jsp.DepartmentEmployee.dto.Department;
import org.jsp.DepartmentEmployee.dto.Employee;

public class EmployeeDao {
	EntityManager manager=Persistence.createEntityManagerFactory("dev").createEntityManager();
	
	public Employee saveEmployee(Employee employee, int dept_id)
	{
		Department d=manager.find(Department.class, dept_id)
				if(d!=null)
				{
					employee.setDepts(d); // assigning department for Employee
					d.getEmps().add(employee); // adding employee for department
					EntityTransaction t=manager.getTransaction();
					manager.persist(employee);
					t.begin();
					t.commit();
					return employee;
				}
	}

}
